%h3= @group.name_with_alias

%p= @group.description

%h4 Location

- if @group.location_known?
  #{@group.location}.
- else
  This group's location is unknown.
  - if @user_membership.owner?
- if @user_membership.owner?
  #{link_to 'change', change_group_location_path}

%h4 Members

= page_entries_info @memberships, :entry_name => 'user'
= will_paginate @memberships, :param_name => 'users_page'

%table.table
  %tr
    %th Login
    %th Role
    - if @user_membership > :admin
      %th
  - @memberships.each do |membership|
    %tr
      %td= membership.user.login
      %td= membership.role
      - if @user_membership.owner?
        %td
          - if membership.admin?
            #{link_to 'make member', change_role_path(:user => membership.user.login, :role => :member)}
          - if membership.member?
            #{link_to 'make admin', change_role_path(:user => membership.user.login, :role => :admin)}
          - if membership.member? || membership.admin?
            #{link_to 'make owner', change_role_path(:user => membership.user.login, :role => :owner)}
      - elsif @user_membership.admin?
        %td
          - if membership.member?
            #{link_to 'make admin', change_role_path(:user => membership.user.login, :role => :admin)}

%h4 Custom locations

= render :partial => 'shared/custom_locations', :locals => {:locatable => @group, :can_edit => @user.is_owner_of?(@group)}
